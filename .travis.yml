sudo: required

env:
  global:
    - DOCKER_VERSION=1.13.0-0~ubuntu-trusty

services:
  - docker

branches:
  except:
    - "/^\\d{14}/"

language: go

go:
  - 1.7

before_install:
  - source ./ci/correct-path.sh

  # upgrade docker-engine to specific version
  - sudo apt-get -o Dpkg::Options::="--force-confnew" install -y docker-engine=${DOCKER_VERSION}
  - docker version

script:
  - ./ci/set-client-id.sh
  - go get ./cmd/convox
  - make test
